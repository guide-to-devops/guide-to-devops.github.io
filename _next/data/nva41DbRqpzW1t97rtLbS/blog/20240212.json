{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var t=Object.create;var c=Object.defineProperty;var s=Object.getOwnPropertyDescriptor;var o=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var d=r=>c(r,\"__esModule\",{value:!0});var p=(r,i)=>()=>(i||r((i={exports:{}}).exports,i),i.exports),u=(r,i)=>{d(r);for(var l in i)c(r,l,{get:i[l],enumerable:!0})},f=(r,i,l)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let n of o(i))!m.call(r,n)&&n!==\"default\"&&c(r,n,{get:()=>i[n],enumerable:!(l=s(i,n))||l.enumerable});return r},k=r=>f(d(c(r!=null?t(g(r)):{},\"default\",r&&r.__esModule&&\"default\"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var a=p((y,h)=>{h.exports=_jsx_runtime});var b={};u(b,{default:()=>I,frontmatter:()=>x});var e=k(a()),x={title:\"Dockerfile \\uC791\\uC131 \\uC2DC \\uBCF4\\uC548 \\uCE21\\uBA74\\uC5D0\\uC11C\\uC758 \\uBAA8\\uBC94 \\uC608\\uC2DC\",date:\"2024-02-12\",tags:[\"Docker\",\"Security\"],draft:!1,summary:\"Dockerfile\\uC744 \\uC791\\uC131\\uD560 \\uB54C \\uBCF4\\uC548 \\uCE21\\uBA74\\uC5D0\\uC11C \\uACE0\\uB824\\uD574\\uC57C \\uD560 \\uC810\\uC744 \\uC815\\uB9AC\\uD574\\uBD05\\uB2C8\\uB2E4.\"};function D(r={}){let{wrapper:i}=r.components||{};return i?(0,e.jsx)(i,Object.assign({},r,{children:(0,e.jsx)(l,{})})):l();function l(){let n=Object.assign({p:\"p\",strong:\"strong\",h3:\"h3\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",code:\"code\"},r.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"Dockerfile\\uC740 \",(0,e.jsx)(n.strong,{children:\"Docker \\uCEE8\\uD14C\\uC774\\uB108 \\uC774\\uBBF8\\uC9C0\\uB97C \\uBE4C\\uB4DC(\\uC0DD\\uC131)\\uD560 \\uB54C \\uD544\\uC694\\uD55C \\uC124\\uC815\\uACFC \\uCEE4\\uB9E8\\uB4DC\\uB97C \\uBA85\\uC2DC\"}),\"\\uD55C \\uAC83\\uC785\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uBBF8 \\uB9C8\\uC774\\uD06C\\uB85C\\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98\\uAC00 \\uB300\\uC138\\uAC00 \\uB41C \\uC9C0\\uAE08, \\uC774\\uB97C \\uAD6C\\uC131\\uD558\\uB294 \",(0,e.jsx)(n.strong,{children:\"\\uCEE8\\uD14C\\uC774\\uB108 \\uC774\\uBBF8\\uC9C0\\uAC00 \\uC5B4\\uB5BB\\uAC8C \\uC815\\uC758\\uB418\\uC5B4 \\uC788\\uB290\\uB0D0\\uC5D0 \\uB530\\uB77C \\uC2E4\\uC81C \\uC11C\\uBE44\\uC2A4\\uC5D0\\uB3C4 \\uC601\\uD5A5\"}),\"\\uC744 \\uC904 \\uC218\\uB3C4 \\uC788\\uAC8C \\uB418\\uB294\\uB370\\uC694. \\uD2B9\\uD788 \\uCEE8\\uD14C\\uC774\\uB108 \\uC774\\uBBF8\\uC9C0\\uC5D0 \",(0,e.jsx)(n.strong,{children:\"\\uBCF4\\uC548 \\uCDE8\\uC57D\\uC810\"}),\"\\uC774 \\uC788\\uB2E4\\uBA74, \\uC0DD\\uAC01\\uB9CC \\uD574\\uB3C4 \\uC544\\uCC14\\uD55C \",(0,e.jsx)(n.strong,{children:\"\\uBCF4\\uC548 \\uC0AC\\uACE0\"}),\"\\uB85C \\uC774\\uC5B4\\uC9C8 \\uC218\\uB3C4 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\uADF8\\uB7EC\\uBBC0\\uB85C \\uC774\\uBC88 \\uAE00\\uC5D0\\uC11C\\uB294 Dockerfile\\uC744 \\uC791\\uC131\\uD560 \\uB54C \\uBCF4\\uC548 \\uCE21\\uBA74\\uC5D0\\uC11C \\uACE0\\uB824\\uD574\\uC57C \\uD560 \\uC810\\uC744 \\uC815\\uB9AC\\uD574\\uBD24\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsxs)(n.h3,{id:\"1-multi-stage\\uB85C-\\uBE4C\\uB4DC\\uD55C\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#1-multi-stage\\uB85C-\\uBE4C\\uB4DC\\uD55C\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. Multi-Stage\\uB85C \\uBE4C\\uB4DC\\uD55C\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"Multi-Stage\\uB780, \\uAE30\\uBCF8 Base Image\\uC5D0\\uC11C \\uBE4C\\uB4DC \\uC9C4\\uD589 \\uD6C4 \\uB098\\uC624\\uB294 \\uC2E4\\uD589 \\uD30C\\uC77C \\uB4F1\\uC744 \\uB610\\uB2E4\\uB978 \\uCD5C\\uC18C\\uD55C\\uC758 Base Image \\uC704\\uB85C \\uC62E\\uACA8 \\uCD5C\\uC885 Image\\uB85C \\uBE4C\\uB4DC\\uD558\\uB294 \\uAC83\\uC744 \\uB9D0\\uD569\\uB2C8\\uB2E4. (\\uC5EC\\uAE30\\uC11C \\uCD5C\\uC18C\\uD55C\\uC758 Base Image\\uB780 \\uC774\\uC804 \\uBE4C\\uB4DC\\uC5D0\\uC11C \\uB098\\uC628 \\uC2E4\\uD589 \\uD30C\\uC77C\\uC774 \\uC791\\uB3D9\\uD560 \\uC218 \\uC788\\uB294 \\uCD5C\\uC18C\\uD55C\\uC758 \\uD658\\uACBD\\uC744 \\uAC16\\uCD98 Base Image\\uB97C \\uC758\\uBBF8\\uD569\\uB2C8\\uB2E4.)\"})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"\\uC774\\uB97C \\uD1B5\\uD574 \",(0,e.jsx)(n.strong,{children:\"\\uCD5C\\uC885 Image\\uC758 \\uC0AC\\uC774\\uC988\\uAC00 \\uAC10\\uC18C\\uD558\\uBBC0\\uB85C Docker Image \\uBE4C\\uB4DC \\uC2DC\\uAC04\\uB3C4 \\uC904\\uC5B4\\uB4E0\\uB2E4\\uB294 \\uC7A5\\uC810\"}),\"\\uB3C4 \\uC788\\uACE0, \\uD504\\uB85C\\uC138\\uC2A4\\uAC00 \\uB3CC\\uC544\\uAC00\\uB294 \\uCD5C\\uC885 Image\\uC5D0\\uB294 \\uD504\\uB85C\\uC138\\uC2A4 \\uC791\\uB3D9\\uC5D0 \\uD544\\uC694\\uD55C \",(0,e.jsx)(n.strong,{children:\"\\uCD5C\\uC18C\\uD55C\\uC758 \\uAD6C\\uC131\\uC694\\uC18C\\uB9CC \\uB2F4\\uACA8\\uC788\\uC73C\\uBBC0\\uB85C \\uBCF4\\uC548\\uC131\\uB3C4 \\uB192\\uC77C \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]})})]}),(0,e.jsxs)(n.h3,{id:\"2-\\uD544\\uC694\\uC5C6\\uB294-\\uD328\\uD0A4\\uC9C0\\uB97C-\\uC904\\uC778\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#2-\\uD544\\uC694\\uC5C6\\uB294-\\uD328\\uD0A4\\uC9C0\\uB97C-\\uC904\\uC778\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \\uD544\\uC694\\uC5C6\\uB294 \\uD328\\uD0A4\\uC9C0\\uB97C \\uC904\\uC778\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"\\uD504\\uB85C\\uC138\\uC2A4 \\uC791\\uB3D9\\uC5D0 \\uD544\\uC694\\uC5C6\\uB294 \\uD328\\uD0A4\\uC9C0\\uB97C \\uCD5C\\uC18C\\uD654\\uD558\\uBA74 \",(0,e.jsx)(n.strong,{children:\"Dockerfile\\uC758 \\uAC00\\uB3C5\\uC131\\uC744 \\uB192\\uC5EC \\uC720\\uC9C0\\uBCF4\\uC218\\uC5D0\\uB3C4 \\uC6A9\\uC774\"}),\"\\uD560 \\uBFD0\\uB9CC \\uC544\\uB2C8\\uB77C, \",(0,e.jsx)(n.strong,{children:\"Docker Image \\uBE4C\\uB4DC \\uC2DC\\uAC04 \\uC5ED\\uC2DC \\uC904\\uC77C \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"\\uAC8C\\uB2E4\\uAC00 \\uC704\\uC640 \\uB9C8\\uCC2C\\uAC00\\uC9C0\\uB85C \",(0,e.jsx)(n.strong,{children:\"\\uD504\\uB85C\\uC138\\uC2A4 \\uAD6C\\uB3D9\\uC5D0 \\uD544\\uC694\\uD55C \\uCD5C\\uC18C\\uD55C\\uC758 \\uC694\\uC18C\\uB9CC \\uB2F4\\uACA8\\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uBCF4\\uC548\\uC131\\uC744 \\uB192\\uC77C \\uC218 \\uC788\\uC8E0.\"})]})})]}),(0,e.jsxs)(n.h3,{id:\"3-root\\uAC00-\\uC544\\uB2CC-\\uBCC4\\uB3C4\\uC758-\\uC0AC\\uC6A9\\uC790\\uB97C-\\uCD94\\uAC00\\uD55C-\\uB2E4\\uC74C-\\uD504\\uB85C\\uC138\\uC2A4\\uB97C-\\uC2E4\\uD589\\uD55C\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#3-root\\uAC00-\\uC544\\uB2CC-\\uBCC4\\uB3C4\\uC758-\\uC0AC\\uC6A9\\uC790\\uB97C-\\uCD94\\uAC00\\uD55C-\\uB2E4\\uC74C-\\uD504\\uB85C\\uC138\\uC2A4\\uB97C-\\uC2E4\\uD589\\uD55C\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. root\\uAC00 \\uC544\\uB2CC \\uBCC4\\uB3C4\\uC758 \\uC0AC\\uC6A9\\uC790\\uB97C \\uCD94\\uAC00\\uD55C \\uB2E4\\uC74C \\uD504\\uB85C\\uC138\\uC2A4\\uB97C \\uC2E4\\uD589\\uD55C\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"\\uCEE8\\uD14C\\uC774\\uB108 \\uB0B4\\uC5D0\\uC11C root \\uACC4\\uC815\\uC744 \\uC0AC\\uC6A9\\uD560 \\uACBD\\uC6B0, \\uBCF4\\uC548 \\uCE68\\uD574 \\uC0AC\\uACE0 \\uBC1C\\uC0DD \\uC2DC \\uADF8 \\uD53C\\uD574\\uAC00 \\uCEE4\\uC9C8 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"\\uADF8\\uB807\\uAE30 \\uB54C\\uBB38\\uC5D0 Dockerfile\\uC5D0\\uC11C \",(0,e.jsx)(n.strong,{children:\"\\uBCC4\\uB3C4\\uC758 \\uC0AC\\uC6A9\\uC790\\uB97C \\uC0DD\\uC131\\uD55C \\uB2E4\\uC74C USER \\uC9C0\\uC2DC\\uC5B4\\uB97C \\uD65C\\uC6A9\\uD574\\uC11C \\uADF8 \\uC0AC\\uC6A9\\uC790\\uB85C \\uD504\\uB85C\\uC138\\uC2A4\\uB97C \\uC2E4\\uD589\\uD558\\uB294 \\uAC83\\uC774 \\uC548\\uC804\"}),\"\\uD569\\uB2C8\\uB2E4.\"]})})]}),(0,e.jsxs)(n.h3,{id:\"4-\\uCEE8\\uD14C\\uC774\\uB108-\\uB0B4-\\uD30C\\uC77C-\\uC2DC\\uC2A4\\uD15C\\uC740-read-only\\uB85C-\\uC124\\uC815\\uD55C\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#4-\\uCEE8\\uD14C\\uC774\\uB108-\\uB0B4-\\uD30C\\uC77C-\\uC2DC\\uC2A4\\uD15C\\uC740-read-only\\uB85C-\\uC124\\uC815\\uD55C\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"4. \\uCEE8\\uD14C\\uC774\\uB108 \\uB0B4 \\uD30C\\uC77C \\uC2DC\\uC2A4\\uD15C\\uC740 Read Only\\uB85C \\uC124\\uC815\\uD55C\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"\\uCEE8\\uD14C\\uC774\\uB108 \\uB0B4\\uC5D0\\uC11C \\uD504\\uB85C\\uC138\\uC2A4\\uAC00 \\uB3D9\\uC791\\uD560 \\uB54C, \\uCD94\\uAC00 \\uC218\\uC815\\uC774 \\uD544\\uC694\\uC5C6\\uACE0 \\uBBFC\\uAC10\\uD55C \\uD30C\\uC77C\\uB4E4\\uC744 \\uC4F0\\uAE30(Write) \\uAC00\\uB2A5\\uD558\\uB3C4\\uB85D \\uB450\\uBA74 \\uBCF4\\uC548 \\uCDE8\\uC57D\\uC810\\uC774 \\uB420 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"CMD\"}),\" \\uC9C0\\uC2DC\\uC5B4\\uB85C \",(0,e.jsx)(n.code,{children:\"chmod a-w {\\uD3F4\\uB354\\uBA85}\"}),\" \\uBA85\\uB839\\uC5B4\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \",(0,e.jsx)(n.strong,{children:\"\\uD574\\uB2F9 \\uD3F4\\uB354\\uC5D0 \\uB300\\uD55C \\uBAA8\\uB4E0 \\uC0AC\\uC6A9\\uC790\\uC758 Write \\uAD8C\\uD55C\\uC744 \\uC81C\\uAC70\"}),\"\\uD558\\uBA74 \\uC774\\uB7EC\\uD55C \\uBCF4\\uC548 \\uCDE8\\uC57D\\uC810\\uC744 \\uC904\\uC77C \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]})})]}),(0,e.jsxs)(n.h3,{id:\"5-shell-access\\uB97C-\\uC81C\\uAC70\\uD55C\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#5-shell-access\\uB97C-\\uC81C\\uAC70\\uD55C\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"5. Shell Access\\uB97C \\uC81C\\uAC70\\uD55C\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"\\uB3D9\\uC791 \\uC911\\uC778 \\uCEE8\\uD14C\\uC774\\uB108\\uB97C \\uB514\\uBC84\\uAE45\\uD558\\uAE30 \\uC704\\uD574 Shell Access(\",(0,e.jsx)(n.code,{children:\"sh\"}),\", \",(0,e.jsx)(n.code,{children:\"bash\"}),\" \\uB4F1)\\uB97C \\uC0AC\\uC6A9\\uD558\\uC5EC \\uD574\\uB2F9 \\uCEE8\\uD14C\\uC774\\uB108\\uB85C \\uC811\\uADFC\\uD558\\uB294 \\uACBD\\uC6B0\\uAC00 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC \\uC774 \\uC5ED\\uC2DC \\uBCF4\\uC548 \\uCE68\\uD574 \\uC218\\uB2E8\\uC73C\\uB85C \\uC545\\uC6A9\\uB420 \\uC218 \\uC788\\uC73C\\uBBC0\\uB85C \\uC81C\\uAC70\\uD558\\uB294 \\uAC83\\uC774 \\uC88B\\uC2B5\\uB2C8\\uB2E4.\"]})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"CMD\"}),\" \\uC9C0\\uC2DC\\uC5B4\\uB85C \",(0,e.jsx)(n.code,{children:\"rm -rf /bin/sh\"}),\" \\uBA85\\uB839\\uC5B4\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74 \",(0,e.jsx)(n.strong,{children:\"\\uD574\\uB2F9 \\uCEE8\\uD14C\\uC774\\uB108\\uC758 Shell Access\\uB97C \\uB9C9\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]})})]}),(0,e.jsxs)(n.p,{children:[\"\\uC9C0\\uAE08\\uAE4C\\uC9C0 Dockerfile \\uC791\\uC131 \\uC2DC \\uBCF4\\uC548 \\uCE21\\uBA74\\uC5D0\\uC11C \\uACE0\\uB824\\uD574\\uC57C \\uD560 \\uBAA8\\uBC94 \\uC608\\uC2DC\\uB97C \\uC0B4\\uD3B4\\uBD24\\uC2B5\\uB2C8\\uB2E4. \\uC704 \\uC608\\uC2DC\\uC640 \\uB354\\uBD88\\uC5B4 \",(0,e.jsx)(n.a,{href:\"https://trivy.dev\",children:\"Trivy\"}),\"\\uC640 \\uAC19\\uC740 \\uBCC4\\uB3C4\\uC758 \\uC624\\uD508\\uC18C\\uC2A4 \\uD234\\uB85C \\uCEE8\\uD14C\\uC774\\uB108 \\uC774\\uBBF8\\uC9C0\\uC758 \\uCDE8\\uC57D\\uC810\\uC744 \\uAC80\\uC0AC\\uD558\\uB294 \\uBC29\\uBC95\\uB3C4 \\uC788\\uB294\\uB370\\uC694. \\uC774\\uB7F0 \\uBCF4\\uC548 \\uCDE8\\uC57D\\uC810 \\uC2A4\\uCE90\\uB108 \\uD234\\uC5D0 \\uB300\\uD574\\uC120 \\uCD94\\uD6C4 \\uB610\\uB2E4\\uB978 \\uAE00\\uC5D0\\uC11C \\uC18C\\uAC1C\\uD574\\uBCF4\\uB3C4\\uB85D \\uD558\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"]})]})}}var I=D;return b;})();\n;return Component;","toc":[{"value":"1. Multi-Stage로 빌드한다.","url":"#1-multi-stage로-빌드한다","depth":3},{"value":"2. 필요없는 패키지를 줄인다.","url":"#2-필요없는-패키지를-줄인다","depth":3},{"value":"3. root가 아닌 별도의 사용자를 추가한 다음 프로세스를 실행한다.","url":"#3-root가-아닌-별도의-사용자를-추가한-다음-프로세스를-실행한다","depth":3},{"value":"4. 컨테이너 내 파일 시스템은 Read Only로 설정한다.","url":"#4-컨테이너-내-파일-시스템은-read-only로-설정한다","depth":3},{"value":"5. Shell Access를 제거한다.","url":"#5-shell-access를-제거한다","depth":3}],"frontMatter":{"readingTime":{"text":"2 min read","minutes":1.825,"time":109500,"words":365},"slug":"20240212","fileName":"20240212.md","title":"Dockerfile 작성 시 보안 측면에서의 모범 예시","date":"2024-02-12T00:00:00.000Z","tags":["Docker","Security"],"draft":false,"summary":"Dockerfile을 작성할 때 보안 측면에서 고려해야 할 점을 정리해봅니다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.18,"time":10800,"words":36},"slug":["default"],"fileName":"default.md","name":"Ukulele Kim","avatar":"/static/images/avatar.jpg","occupation":"DevOps Engineer","email":"edu.ukulelekim@gmail.com","github":"https://github.com/ukuleleKim","date":null}],"prev":{"title":"Dockerfile의 ADD vs COPY","date":"2023-11-10T00:00:00.000Z","tags":["Docker"],"draft":false,"summary":"Dockerfile의 ADD 명령어와 COPY 명령어를 비교해봅니다.","slug":"20231110-1"},"next":{"title":"컨테이너 엔진 관련 취약점: CVE-2024-21626","date":"2024-02-18T00:00:00.000Z","tags":["Security","Container"],"draft":false,"summary":"2024년 1월 말 보고된 컨테이너 엔진 관련 취약점 CVE-2024-21626에 대해 살펴봅니다.","slug":"20240218"}},"__N_SSG":true}